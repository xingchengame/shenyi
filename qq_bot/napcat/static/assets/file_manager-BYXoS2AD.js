import{h as f,g as b}from"./codemirror-core-DIzFijqu.js";import{J as u}from"./react-dom-TsCL3mk_.js";import{p as n}from"./index-B0DyBq9P.js";function S(s){return f.forwardRef(s)}var I=(s,t,a=!0)=>{if(!t)return[s,{}];const e=t.reduce((r,o)=>o in s?{...r,[o]:s[o]}:r,{});return a?[Object.keys(s).filter(o=>!t.includes(o)).reduce((o,c)=>({...o,[c]:s[c]}),{}),e]:[s,e]},i={exports:{}},d,m;function F(){if(m)return d;m=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return d=s,d}var p,y;function R(){if(y)return p;y=1;var s=F();function t(){}function a(){}return a.resetWarningCache=t,p=function(){function e(c,U,g,C,P,w){if(w!==s){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function r(){return e}var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:a,resetWarningCache:t};return o.PropTypes=o,o},p}var h;function T(){return h||(h=1,i.exports=R()()),i.exports}var v=T();const _=b(v);class x{static async listFiles(t="/"){const{data:a}=await n.get(`/File/list?path=${encodeURIComponent(t)}`);return a.data}static async listDirectories(t="/"){const{data:a}=await n.get(`/File/list?path=${encodeURIComponent(t)}&onlyDirectory=true`);return a.data}static async createDirectory(t){const{data:a}=await n.post("/File/mkdir",{path:t});return a.data}static async delete(t){const{data:a}=await n.post("/File/delete",{path:t});return a.data}static async readFile(t){const{data:a}=await n.get(`/File/read?path=${encodeURIComponent(t)}`);return a.data}static async writeFile(t,a){const{data:e}=await n.post("/File/write",{path:t,content:a});return e.data}static async createFile(t){const{data:a}=await n.post("/File/create",{path:t});return a.data}static async batchDelete(t){const{data:a}=await n.post("/File/batchDelete",{paths:t});return a.data}static async rename(t,a){const{data:e}=await n.post("/File/rename",{oldPath:t,newPath:a});return e.data}static async move(t,a){const{data:e}=await n.post("/File/move",{sourcePath:t,targetPath:a});return e.data}static async batchMove(t){const{data:a}=await n.post("/File/batchMove",{items:t});return a.data}static download(t){const a=`/File/download?path=${encodeURIComponent(t)}`;u.promise(n.post(a,void 0,{responseType:"blob"}).catch(e=>{throw console.error(e),new Error("下载失败")}),{loading:"正在下载文件...",success:"下载成功",error:"下载失败"}).then(e=>{const r=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=r;let c=t.split("/").pop()||"";t.split(".").length===1&&(c+=".zip"),o.setAttribute("download",c),document.body.appendChild(o),o.click(),document.body.removeChild(o)}).catch(e=>{console.error(e)})}static async batchDownload(t){u.promise(n.post("/File/batchDownload",{paths:t},{responseType:"blob"}).catch(e=>{throw console.error(e),new Error("下载失败")}),{loading:"正在下载文件...",success:"下载成功",error:"下载失败"}).then(e=>{const r=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=r,o.setAttribute("download","files.zip"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}).catch(e=>{console.error(e)})}static async downloadToURL(t){const a=`/File/download?path=${encodeURIComponent(t)}`,e=await n.post(a,void 0,{responseType:"blob"});return window.URL.createObjectURL(new Blob([e.data]))}static async upload(t,a){const e=new FormData;a.forEach(o=>{e.append("files",o)});const{data:r}=await n.post(`/File/upload?path=${encodeURIComponent(t)}`,e,{headers:{"Content-Type":"multipart/form-data"}});return r.data}static async uploadWebUIFont(t){const a=new FormData;a.append("file",t);const{data:e}=await n.post("/File/font/upload/webui",a,{headers:{"Content-Type":"multipart/form-data"}});return e.data}static async deleteWebUIFont(){const{data:t}=await n.post("/File/font/delete/webui");return t.data}}export{x as F,_ as P,S as f,I as m};
