import{j as e,h as N,R as Ke}from"./codemirror-core-DIzFijqu.js";import{t as ee,d as Ae,E as L,D as We,c as ne,m as qe,w as ze,o as Ve,L as Le,f as K,F as he,g as oe,e as Ue,b as O,y as Be,z as Ze,q as Ge,v as Qe,x as Je,A as Xe,P as Ye}from"./index-B0DyBq9P.js";import{t as et,a as tt}from"./chunk-ML27DD5T-CMfbU3IH.js";import{k as at,aN as st,n as rt,aO as nt,i as W,aP as ot,r as lt,a2 as it,a3 as ct,a4 as dt,aQ as ut,aR as pt,aS as ht,aT as bt,c as Y,J as F}from"./react-dom-TsCL3mk_.js";import{a as mt}from"./index-OutTOxJU.js";import{b as ft,a as gt,p as vt}from"./chunk-2QQAR2RD-C6SUFd_i.js";import{m as ue,u as xt,a as yt,d as wt,b as St,c as Ct,s as kt,l as jt}from"./chunk-KVDW62ZT-CdlHxaox.js";import{m as Pt}from"./chunk-WQVQ7P2I-B4KcTpLM.js";import{$ as Nt}from"./Item-DvdRZmps.js";import{t as Z}from"./chunk-6LIX6LVT-v4ufXNaW.js";import{s as G}from"./index-DhICtZLt.js";import{v as Dt}from"./index-CtZU_f5P.js";import{P as Tt,H as pe,a as Mt,W as Et,b as It}from"./icons-DCS2NAJ5.js";import{c as q}from"./chunk-NAV3ZXLI-VwA3667I.js";import{s as Rt}from"./chunk-J6JGI6RM-DVh9RltW.js";import{G as $t}from"./iconBase-ClXMXqAg.js";import{f as _t}from"./index-BII4DDrN.js";import{l as Ht}from"./index-DYKlz1bo.js";import{D as Ot}from"./container-DwknEHbI.js";import{u as be}from"./use-config-DwrVP63J.js";import{u as me}from"./use-dialog-CRavAmtS.js";import{i as Ft}from"./chunk-2QAN2V2R-DjiYH11d.js";import{u as Kt,C as At}from"./react-hook-form-D03iFOdR.js";import{S as Wt}from"./switch_card-B19u6t9-.js";import"./index-CokAva9Y.js";import"./chunk-FGM523TA-1yNCP0SW.js";import"./chunk-SLABUSGS-BX9EgnNv.js";import"./chunk-AXSF7SRE-xAGcR_TS.js";import"./chunk-M3MASYO7-BtOvSeRL.js";import"./chunk-EN4B57RQ-CeMxVeoS.js";import"./chunk-5PILOUBS-C2iqzQ1E.js";import"./qq_manager-EQj02-Fv.js";import"./chunk-CAFRINWI-CcU5yOMx.js";var qt=ee({base:["w-full","p-1","min-w-[200px]"]});ee({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","outline-none","cursor-pointer","tap-highlight-transparent","data-[pressed=true]:opacity-70",...Ae,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal truncate",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:"border-small border-transparent hover:border-default data-[hover=true]:bg-default-100"},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{}}},defaultVariants:{variant:"solid",color:"default"},compoundVariants:[{variant:"solid",color:"default",class:{base:"data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"solid",color:"primary",class:{base:"data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"solid",color:"secondary",class:{base:"data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"solid",color:"success",class:{base:"data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"solid",color:"warning",class:{base:"data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"solid",color:"danger",class:{base:"data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"shadow",color:"default",class:{base:"data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"shadow",color:"primary",class:{base:"data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"shadow",color:"secondary",class:{base:"data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"shadow",color:"success",class:{base:"data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"shadow",color:"warning",class:{base:"data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"shadow",color:"danger",class:{base:"data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"bordered",color:"default",class:{base:"data-[hover=true]:border-default"}},{variant:"bordered",color:"primary",class:{base:"data-[hover=true]:border-primary data-[hover=true]:text-primary"}},{variant:"bordered",color:"secondary",class:{base:"data-[hover=true]:border-secondary data-[hover=true]:text-secondary"}},{variant:"bordered",color:"success",class:{base:"data-[hover=true]:border-success data-[hover=true]:text-success"}},{variant:"bordered",color:"warning",class:{base:"data-[hover=true]:border-warning data-[hover=true]:text-warning"}},{variant:"bordered",color:"danger",class:{base:"data-[hover=true]:border-danger data-[hover=true]:text-danger"}},{variant:"flat",color:"default",class:{base:"data-[hover=true]:bg-default/40 data-[hover=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{base:"data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary"}},{variant:"flat",color:"secondary",class:{base:"data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary"}},{variant:"flat",color:"success",class:{base:"data-[hover=true]:bg-success/20 data-[hover=true]:text-success "}},{variant:"flat",color:"warning",class:{base:"data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning"}},{variant:"flat",color:"danger",class:{base:"data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger"}},{variant:"faded",color:"default",class:{base:"data-[hover=true]:text-default-foreground"}},{variant:"faded",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"faded",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"faded",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"faded",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"faded",color:"danger",class:{base:"data-[hover=true]:text-danger"}},{variant:"light",color:"default",class:{base:"data-[hover=true]:text-default-500"}},{variant:"light",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"light",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"light",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"light",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"light",color:"danger",class:{base:"data-[hover=true]:text-danger"}}]});ee({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}});ee({base:"w-full flex flex-col gap-0.5 p-1"});var zt=(t,s)=>{if(!t&&!s)return{};const a=new Set([...Object.keys(t||{}),...Object.keys(s||{})]);return Array.from(a).reduce((r,n)=>({...r,[n]:L(t==null?void 0:t[n],s==null?void 0:s[n])}),{})},[Vt,fe]=We({name:"DropdownContext",errorMessage:"useDropdownContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Dropdown />`"});function Lt(t){const{isSelected:s,disableAnimation:a,...r}=t;return e.jsx("svg",{"aria-hidden":"true","data-selected":s,role:"presentation",viewBox:"0 0 17 18",...r,children:e.jsx("polyline",{fill:"none",points:"1 9 7 14 15 4",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:s?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,style:a?{}:{transition:"stroke-dashoffset 200ms ease"}})})}function Ut(t){var s,a;const r=ne(),[n,m]=qe(t,ue.variantKeys),{as:b,item:u,state:c,shortcut:p,description:f,startContent:h,endContent:o,isVirtualized:i,selectedIcon:g,className:x,classNames:y,onAction:w,autoFocus:D,onPress:v,onPressStart:T,onPressUp:j,onPressEnd:M,onPressChange:$,onHoverStart:C,onHoverChange:H,onHoverEnd:_,hideSelectedIcon:P=!1,isReadOnly:A=!1,closeOnSelect:d,onClose:l,onClick:k,...S}=n,I=(a=(s=t.disableAnimation)!=null?s:r==null?void 0:r.disableAnimation)!=null?a:!1,E=N.useRef(null),U=b||(S!=null&&S.href?"a":"li"),te=typeof U=="string",{rendered:ae,key:se}=u,Se=c.disabledKeys.has(se)||t.isDisabled,le=c.selectionManager.selectionMode!=="none",Ce=xt(),{isFocusVisible:ke,focusProps:je}=at({autoFocus:D});k&&typeof k=="function"&&ze("onClick is deprecated, please use onPress instead. See: https://github.com/heroui-inc/heroui/issues/4292","MenuItem");const Pe=N.useCallback(R=>{k==null||k(R),v==null||v(R)},[k,v]),{isPressed:ie,isFocused:Ne,isSelected:ce,isDisabled:z,menuItemProps:De,labelProps:Te,descriptionProps:Me,keyboardShortcutProps:Ee}=st({key:se,onClose:l,isDisabled:Se,onPress:Pe,onPressStart:T,onPressUp:j,onPressEnd:M,onPressChange:$,"aria-label":n["aria-label"],closeOnSelect:d,isVirtualized:i,onAction:w},c,E);let{hoverProps:Ie,isHovered:de}=rt({isDisabled:z,onHoverStart(R){nt()||(c.selectionManager.setFocused(!0),c.selectionManager.setFocusedKey(se)),C==null||C(R)},onHoverChange:H,onHoverEnd:_}),re=De;const V=N.useMemo(()=>ue({...m,isDisabled:z,disableAnimation:I,hasTitleTextChild:typeof ae=="string",hasDescriptionTextChild:typeof f=="string"}),[Ve(m),z,I,ae,f]),Re=L(y==null?void 0:y.base,x);A&&(re=Le(re));const $e=(R={})=>({ref:E,...W(A?{}:je,he(S,{enabled:te}),re,Ie,R),"data-focus":K(Ne),"data-selectable":K(le),"data-hover":K(Ce?de||ie:de),"data-disabled":K(z),"data-selected":K(ce),"data-pressed":K(ie),"data-focus-visible":K(ke),className:V.base({class:L(Re,R.className)})}),_e=(R={})=>({...W(Te,R),className:V.title({class:y==null?void 0:y.title})}),He=(R={})=>({...W(Me,R),className:V.description({class:y==null?void 0:y.description})}),Oe=(R={})=>({...W(Ee,R),className:V.shortcut({class:y==null?void 0:y.shortcut})}),Fe=N.useCallback((R={})=>({"aria-hidden":K(!0),"data-disabled":K(z),className:V.selectedIcon({class:y==null?void 0:y.selectedIcon}),...R}),[z,V,y]);return{Component:U,domRef:E,slots:V,classNames:y,isSelectable:le,isSelected:ce,isDisabled:z,rendered:ae,shortcut:p,description:f,startContent:h,endContent:o,selectedIcon:g,disableAnimation:I,getItemProps:$e,getLabelProps:_e,hideSelectedIcon:P,getDescriptionProps:He,getKeyboardShortcutProps:Oe,getSelectedIconProps:Fe}}var ge=t=>{const{Component:s,slots:a,classNames:r,rendered:n,shortcut:m,description:b,isSelectable:u,isSelected:c,isDisabled:p,selectedIcon:f,startContent:h,endContent:o,disableAnimation:i,hideSelectedIcon:g,getItemProps:x,getLabelProps:y,getDescriptionProps:w,getKeyboardShortcutProps:D,getSelectedIconProps:v}=Ut(t),T=N.useMemo(()=>{const j=e.jsx(Lt,{disableAnimation:i,isSelected:c});return typeof f=="function"?f({icon:j,isSelected:c,isDisabled:p}):f||j},[f,c,p,i]);return e.jsxs(s,{...x(),children:[h,b?e.jsxs("div",{className:a.wrapper({class:r==null?void 0:r.wrapper}),children:[e.jsx("span",{...y(),children:n}),e.jsx("span",{...w(),children:b})]}):e.jsx("span",{...y(),children:n}),m&&e.jsx("kbd",{...D(),children:m}),u&&!g&&e.jsx("span",{...v(),children:T}),o]})};ge.displayName="HeroUI.MenuItem";var ve=ge,xe=oe(({item:t,state:s,as:a,variant:r,color:n,disableAnimation:m,onAction:b,closeOnSelect:u,className:c,classNames:p,showDivider:f=!1,hideSelectedIcon:h,dividerProps:o={},itemClasses:i,title:g,...x},y)=>{const w=a||"li",D=N.useMemo(()=>yt(),[]),v=L(p==null?void 0:p.base,c),T=L(p==null?void 0:p.divider,o==null?void 0:o.className),{itemProps:j,headingProps:M,groupProps:$}=ot({heading:t.rendered,"aria-label":t["aria-label"]});return e.jsxs(w,{"data-slot":"base",...W(j,x),className:D.base({class:v}),children:[t.rendered&&e.jsx("span",{...M,className:D.heading({class:p==null?void 0:p.heading}),"data-slot":"heading",children:t.rendered}),e.jsxs("ul",{...$,className:D.group({class:p==null?void 0:p.group}),"data-has-title":!!t.rendered,"data-slot":"group",children:[[...t.childNodes].map(C=>{const{key:H,props:_}=C;let P=e.jsx(ve,{classNames:i,closeOnSelect:u,color:n,disableAnimation:m,hideSelectedIcon:h,item:C,state:s,variant:r,onAction:b,..._},H);return C.wrapper&&(P=C.wrapper(P)),P}),f&&e.jsx(wt,{as:"li",className:D.divider({class:T}),...o})]})]})});xe.displayName="HeroUI.MenuSection";var Bt=xe;class Zt{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(s){let a=this.keyMap.get(s);var r;return a&&(r=a.prevKey)!==null&&r!==void 0?r:null}getKeyAfter(s){let a=this.keyMap.get(s);var r;return a&&(r=a.nextKey)!==null&&r!==void 0?r:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(s){var a;return(a=this.keyMap.get(s))!==null&&a!==void 0?a:null}at(s){const a=[...this.getKeys()];return this.getItem(a[s])}constructor(s,{expandedKeys:a}={}){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=s,a=a||new Set;let r=u=>{if(this.keyMap.set(u.key,u),u.childNodes&&(u.type==="section"||a.has(u.key)))for(let c of u.childNodes)r(c)};for(let u of s)r(u);let n=null,m=0;for(let[u,c]of this.keyMap)n?(n.nextKey=u,c.prevKey=n.key):(this.firstKey=u,c.prevKey=void 0),c.type==="item"&&(c.index=m++),n=c,n.nextKey=void 0;var b;this.lastKey=(b=n==null?void 0:n.key)!==null&&b!==void 0?b:null}}function Gt(t){let{onExpandedChange:s}=t,[a,r]=lt(t.expandedKeys?new Set(t.expandedKeys):void 0,t.defaultExpandedKeys?new Set(t.defaultExpandedKeys):new Set,s),n=it(t),m=N.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),b=ct(t,N.useCallback(c=>new Zt(c,{expandedKeys:a}),[a]),null);return N.useEffect(()=>{n.focusedKey!=null&&!b.getItem(n.focusedKey)&&n.setFocusedKey(null)},[b,n.focusedKey]),{collection:b,expandedKeys:a,disabledKeys:m,toggleKey:c=>{r(Qt(a,c))},setExpandedKeys:r,selectionManager:new dt(b,n)}}function Qt(t,s){let a=new Set(t);return a.has(s)?a.delete(s):a.add(s),a}function Jt(t){var s;const a=ne(),{as:r,ref:n,variant:m,color:b,children:u,disableAnimation:c=(s=a==null?void 0:a.disableAnimation)!=null?s:!1,onAction:p,closeOnSelect:f,itemClasses:h,className:o,state:i,topContent:g,bottomContent:x,hideEmptyContent:y=!1,hideSelectedIcon:w=!1,emptyContent:D="No items.",menuProps:v,onClose:T,classNames:j,...M}=t,$=r||"ul",C=Ue(n),H=typeof $=="string",_=Gt({...M,...v,children:u}),P=i||_,{menuProps:A}=ut({...M,...v,onAction:p},P,C),d=N.useMemo(()=>St({className:o}),[o]),l=L(j==null?void 0:j.base,o);return{Component:$,state:P,variant:m,color:b,disableAnimation:c,onClose:T,topContent:g,bottomContent:x,closeOnSelect:f,className:o,itemClasses:h,getBaseProps:(E={})=>({ref:C,"data-slot":"base",className:d.base({class:l}),...he(M,{enabled:H}),...E}),getListProps:(E={})=>({"data-slot":"list",className:d.list({class:j==null?void 0:j.list}),...A,...E}),hideEmptyContent:y,hideSelectedIcon:w,getEmptyContentProps:(E={})=>({children:D,className:d.emptyContent({class:j==null?void 0:j.emptyContent}),...E})}}var Xt=oe(function(s,a){const{Component:r,state:n,closeOnSelect:m,color:b,disableAnimation:u,hideSelectedIcon:c,hideEmptyContent:p,variant:f,onClose:h,topContent:o,bottomContent:i,itemClasses:g,getBaseProps:x,getListProps:y,getEmptyContentProps:w}=Jt({...s,ref:a}),D=e.jsxs(r,{...y(),children:[!n.collection.size&&!p&&e.jsx("li",{children:e.jsx("div",{...w()})}),[...n.collection].map(v=>{const T={closeOnSelect:m,color:b,disableAnimation:u,item:v,state:n,variant:f,onClose:h,hideSelectedIcon:c,...v.props},j=zt(g,T==null?void 0:T.classNames);if(v.type==="section")return e.jsx(Bt,{...T,itemClasses:j},v.key);let M=e.jsx(ve,{...T,classNames:j},v.key);return v.wrapper&&(M=v.wrapper(M)),M})]});return e.jsxs("div",{...x(),children:[o,D,i]})}),Yt=Xt,ea=Nt,B=ea,ta=oe(function(s,a){const{getMenuProps:r}=fe();return e.jsx(ft,{children:e.jsx(pt,{contain:!0,restoreFocus:!0,children:e.jsx(Yt,{...r(s,a)})})})}),aa=ta,ye=t=>{const{getMenuTriggerProps:s}=fe(),{children:a,...r}=t;return e.jsx(gt,{...s(r),children:a})};ye.displayName="HeroUI.DropdownTrigger";var sa=ye,ra=(t,s)=>{if(t){const a=Array.isArray(t.children)?t.children:[...(t==null?void 0:t.items)||[]];if(a&&a.length)return a.find(n=>{if(n&&n.key===s)return n})||{}}return null},na=(t,s,a)=>{const r=a||ra(t,s);return r&&r.props&&"closeOnSelect"in r.props?r.props.closeOnSelect:t==null?void 0:t.closeOnSelect};function oa(t){var s;const a=ne(),{as:r,triggerRef:n,isOpen:m,defaultOpen:b,onOpenChange:u,isDisabled:c,type:p="menu",trigger:f="press",placement:h="bottom",closeOnSelect:o=!0,shouldBlockScroll:i=!0,classNames:g,disableAnimation:x=(s=a==null?void 0:a.disableAnimation)!=null?s:!1,onClose:y,className:w,...D}=t,v=r||"div",T=N.useRef(null),j=n||T,M=N.useRef(null),$=N.useRef(null),C=ht({trigger:f,isOpen:m,defaultOpen:b,onOpenChange:S=>{u==null||u(S),S||y==null||y()}}),{menuTriggerProps:H,menuProps:_}=bt({type:p,trigger:f,isDisabled:c},C,j),P=N.useMemo(()=>qt({className:w}),[w]),A=S=>{S!==void 0&&!S||o&&C.close()},d=(S={})=>{const I=W(D,S);return{state:C,placement:h,ref:$,disableAnimation:x,shouldBlockScroll:i,scrollRef:M,triggerRef:j,...I,classNames:{...g,...S.classNames,content:L(P,g==null?void 0:g.content,S.className)},shouldCloseOnInteractOutside:I!=null&&I.shouldCloseOnInteractOutside?I.shouldCloseOnInteractOutside:E=>Ct(E,T,C)}},l=(S={})=>{const{onPress:I,onPressStart:E,...U}=H;return W(U,{isDisabled:c},S)},k=(S,I=null)=>({ref:Pt(I,M),menuProps:_,closeOnSelect:o,...W(S,{onAction:(E,U)=>{const te=na(S,E,U);A(te)},onClose:C.close})});return{Component:v,menuRef:M,menuProps:_,classNames:P,closeOnSelect:o,onClose:C.close,autoFocus:C.focusStrategy||!0,disableAnimation:x,getPopoverProps:d,getMenuProps:k,getMenuTriggerProps:l}}var we=t=>{const{children:s,...a}=t,r=oa(a),[n,m]=Ke.Children.toArray(s);return e.jsx(Vt,{value:r,children:e.jsxs(vt,{...r.getPopoverProps(),children:[n,m]})})};we.displayName="HeroUI.Dropdown";var la=we;const ia=t=>{const{onOpen:s}=t;return e.jsxs(la,{classNames:{content:"bg-opacity-30 backdrop-blur-md"},placement:"right",children:[e.jsx(sa,{children:e.jsx(O,{className:"bg-default-100/50 hover:bg-default-200/50 text-default-700 backdrop-blur-md",startContent:e.jsx(Dt,{className:"text-2xl"}),children:"新建"})}),e.jsxs(aa,{"aria-label":"Create Network Config",color:"default",variant:"flat",onAction:a=>{s(a)},children:[e.jsx(B,{isReadOnly:!0,className:"cursor-default hover:!bg-transparent",textValue:"title",children:e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"w-5 h-5 -ml-3",children:e.jsx(Tt,{})}),e.jsx("div",{className:"text-primary-400",children:"新建网络配置"})]})},"title"),e.jsx(B,{textValue:"httpServers",startContent:e.jsx("div",{className:"w-6 h-6",children:e.jsx(pe,{})}),children:e.jsxs("div",{className:"flex gap-1 items-center",children:["HTTP服务器",e.jsx(Z,{content:"「由NapCat建立」一个HTTP服务器，你可以「使用框架连接」此服务器或者「自己构造请求发送」至此服务器。NapCat会根据你配置的IP和端口等建立一个地址，你或者你的框架应该连接到这个地址。",showArrow:!0,className:"max-w-64",children:e.jsx(O,{isIconOnly:!0,radius:"full",size:"sm",variant:"light",className:"w-4 h-4 min-w-0",children:e.jsx(G,{})})})]})},"httpServers"),e.jsx(B,{textValue:"httpSseServers",startContent:e.jsx("div",{className:"w-6 h-6",children:e.jsx(pe,{})}),children:e.jsxs("div",{className:"flex gap-1 items-center",children:["HTTP SSE服务器",e.jsx(Z,{content:"「由NapCat建立」一个HTTP SSE服务器，你可以「使用框架连接」此服务器或者「自己构造请求发送」至此服务器。NapCat会根据你配置的IP和端口等建立一个地址，你或者你的框架应该连接到这个地址。",showArrow:!0,className:"max-w-64",children:e.jsx(O,{isIconOnly:!0,radius:"full",size:"sm",variant:"light",className:"w-4 h-4 min-w-0",children:e.jsx(G,{})})})]})},"httpSseServers"),e.jsx(B,{textValue:"httpClients",startContent:e.jsx("div",{className:"w-6 h-6",children:e.jsx(Mt,{})}),children:e.jsxs("div",{className:"flex gap-1 items-center",children:["HTTP客户端",e.jsx(Z,{content:"「由框架或者你自己建立」的一个用于「接收」NapCat向你发送请求的客户端，通常框架会提供一个HTTP地址。这个地址是你使用的框架提供的，NapCat会主动连接它。",showArrow:!0,className:"max-w-64",children:e.jsx(O,{isIconOnly:!0,radius:"full",size:"sm",variant:"light",className:"w-4 h-4 min-w-0",children:e.jsx(G,{})})})]})},"httpClients"),e.jsx(B,{textValue:"websocketServers",startContent:e.jsx("div",{className:"w-6 h-6",children:e.jsx(Et,{})}),children:e.jsxs("div",{className:"flex gap-1 items-center",children:["Websocket服务器",e.jsx(Z,{content:"「由NapCat建立」一个WebSocket服务器，你的框架应该连接到此服务器。NapCat会根据你配置的IP和端口等建立一个WebSocket地址，你或者你的框架应该连接到这个地址。",showArrow:!0,className:"max-w-64",children:e.jsx(O,{isIconOnly:!0,radius:"full",size:"sm",variant:"light",className:"w-4 h-4 min-w-0",children:e.jsx(G,{})})})]})},"websocketServers"),e.jsx(B,{textValue:"websocketClients",startContent:e.jsx("div",{className:"w-6 h-6",children:e.jsx(It,{})}),children:e.jsxs("div",{className:"flex gap-1 items-center",children:["Websocket客户端",e.jsx(Z,{content:"「由框架或者你自己建立」的WebSocket，通常框架会「提供」一个ws地址，NapCat会主动连接它。",showArrow:!0,className:"max-w-64",children:e.jsx(O,{isIconOnly:!0,radius:"full",size:"sm",variant:"light",className:"w-4 h-4 min-w-0",children:e.jsx(G,{})})})]})},"websocketClients")]})]})};function ca(t){return $t({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M10 11C10 10.4477 10.4477 10 11 10H13C13.5523 10 14 10.4477 14 11C14 11.5523 13.5523 12 13 12H11C10.4477 12 10 11.5523 10 11Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M11 14C10.4477 14 10 14.4477 10 15C10 15.5523 10.4477 16 11 16H13C13.5523 16 14 15.5523 14 15C14 14.4477 13.5523 14 13 14H11Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M9.09447 4.74918C8.41606 4.03243 8 3.0648 8 2H10C10 3.10457 10.8954 4 12 4C13.1046 4 14 3.10457 14 2H16C16 3.0648 15.5839 4.03243 14.9055 4.74918C16.1782 5.45491 17.1673 6.6099 17.6586 8H19C19.5523 8 20 8.44772 20 9C20 9.55229 19.5523 10 19 10H18V12H19C19.5523 12 20 12.4477 20 13C20 13.5523 19.5523 14 19 14H18V16H19C19.5523 16 20 16.4477 20 17C20 17.5523 19.5523 18 19 18H17.6586C16.8349 20.3304 14.6124 22 12 22C9.38756 22 7.16508 20.3304 6.34141 18H5C4.44772 18 4 17.5523 4 17C4 16.4477 4.44772 16 5 16H6V14H5C4.44772 14 4 13.5523 4 13C4 12.4477 4.44772 12 5 12H6V10H5C4.44772 10 4 9.55229 4 9C4 8.44772 4.44772 8 5 8H6.34141C6.83274 6.6099 7.82181 5.45491 9.09447 4.74918ZM8 16V10C8 7.79086 9.79086 6 12 6C14.2091 6 16 7.79086 16 10V16C16 18.2091 14.2091 20 12 20C9.79086 20 8 18.2091 8 16Z",fill:"currentColor"},child:[]}]})(t)}const Q=({data:t,typeLabel:s,fields:a,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b,showType:u})=>{const{name:c,enable:p,debug:f}=t,[h,o]=N.useState(!1),i=()=>{o(!0),n().finally(()=>o(!1))},g=()=>{o(!0),m().finally(()=>o(!1))},x=()=>{o(!0),b().finally(()=>o(!1))},y=w=>["URL","Token","AccessToken"].includes(w);return e.jsx(Ot,{className:"w-full max-w-[420px]",tag:u?s:void 0,action:e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(O,{fullWidth:!0,radius:"full",size:"sm",variant:"flat",className:"flex-1 bg-default-100 dark:bg-default-50 text-default-600 font-medium hover:bg-warning/20 hover:text-warning transition-colors",startContent:e.jsx(_t,{size:16}),onPress:r,isDisabled:h,children:"编辑"}),e.jsx(O,{fullWidth:!0,radius:"full",size:"sm",variant:"flat",className:Y("flex-1 bg-default-100 dark:bg-default-50 text-default-600 font-medium transition-colors",f?"hover:bg-secondary/20 hover:text-secondary data-[hover=true]:text-secondary":"hover:bg-success/20 hover:text-success data-[hover=true]:text-success"),startContent:e.jsx(ca,{size:16}),onPress:x,isDisabled:h,children:f?"默认":"调试"}),e.jsx(O,{fullWidth:!0,radius:"full",size:"sm",variant:"flat",className:"flex-1 bg-default-100 dark:bg-default-50 text-default-600 font-medium hover:bg-danger/20 hover:text-danger transition-colors",startContent:e.jsx(Ht,{size:16}),onPress:g,isDisabled:h,children:"删除"})]}),enableSwitch:e.jsx(Rt,{isDisabled:h,isSelected:p,onChange:i,classNames:{wrapper:"group-data-[selected=true]:bg-primary-400"}}),title:c,children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(()=>{const w=a.find(D=>y(D.label));if(w)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-1 p-3 bg-default-100/50 dark:bg-white/10 rounded-xl border border-transparent hover:border-default-200 transition-colors col-span-2",children:[e.jsx("span",{className:"text-xs text-default-500 dark:text-white/50 font-medium tracking-wide",children:"类型"}),e.jsx("div",{className:"text-sm font-medium text-default-700 dark:text-white/90 truncate",children:s})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-3 bg-default-100/50 dark:bg-white/10 rounded-xl border border-transparent hover:border-default-200 transition-colors col-span-2",children:[e.jsx("span",{className:"text-xs text-default-500 dark:text-white/50 font-medium tracking-wide",children:w.label}),e.jsx("div",{className:"text-sm font-medium text-default-700 dark:text-white/90 truncate",children:w.render?w.render(w.value):e.jsx("span",{className:Y(typeof w.value=="string"&&(w.value.startsWith("http")||w.value.includes(".")||w.value.includes(":"))?"font-mono":""),children:String(w.value)})})]})]});{const D=a.slice(0,3);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-1 p-3 bg-default-100/50 dark:bg-white/10 rounded-xl border border-transparent hover:border-default-200 transition-colors",children:[e.jsx("span",{className:"text-xs text-default-500 dark:text-white/50 font-medium tracking-wide",children:"类型"}),e.jsx("div",{className:"text-sm font-medium text-default-700 dark:text-white/90 truncate",children:s})]}),D.map((v,T)=>e.jsxs("div",{className:"flex flex-col gap-1 p-3 bg-default-100/50 dark:bg-white/10 rounded-xl border border-transparent hover:border-default-200 transition-colors",children:[e.jsx("span",{className:"text-xs text-default-500 dark:text-white/50 font-medium tracking-wide",children:v.label}),e.jsx("div",{className:"text-sm font-medium text-default-700 dark:text-white/90 truncate",children:v.render?v.render(v.value):e.jsx("span",{className:Y(typeof v.value=="string"&&(v.value.startsWith("http")||v.value.includes(".")||v.value.includes(":"))?"font-mono":""),children:String(v.value)})})]},T))]})}})()})})},da=t=>{const{data:s,showType:a,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b}=t,{url:u,reportSelfMessage:c,messagePostFormat:p}=s,f=[{label:"URL",value:u},{label:"消息格式",value:p},{label:"上报自身消息",value:c,render:h=>e.jsx(q,{color:h?"success":"default",size:"sm",variant:"flat",children:h?"是":"否"})}];return e.jsx(Q,{data:s,showType:a,typeLabel:"HTTP客户端",fields:f,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b})},ua=t=>{const{data:s,showType:a,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b}=t,{host:u,port:c,enableCors:p,enableWebsocket:f,messagePostFormat:h}=s,o=[{label:"主机",value:u},{label:"端口",value:c},{label:"消息格式",value:h},{label:"CORS",value:p,render:i=>e.jsx(q,{color:i?"success":"default",size:"sm",variant:"flat",children:i?"已启用":"未启用"})},{label:"WS",value:f,render:i=>e.jsx(q,{color:i?"success":"default",size:"sm",variant:"flat",children:i?"已启用":"未启用"})}];return e.jsx(Q,{data:s,showType:a,typeLabel:"HTTP服务器",fields:o,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b})},pa=t=>{const{data:s,showType:a,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b}=t,{host:u,port:c,enableCors:p,enableWebsocket:f,messagePostFormat:h}=s,o=[{label:"主机",value:u},{label:"端口",value:c},{label:"消息格式",value:h},{label:"CORS",value:p,render:i=>e.jsx(q,{color:i?"success":"default",size:"sm",variant:"flat",children:i?"已启用":"未启用"})},{label:"WS",value:f,render:i=>e.jsx(q,{color:i?"success":"default",size:"sm",variant:"flat",children:i?"已启用":"未启用"})}];return e.jsx(Q,{data:s,showType:a,typeLabel:"HTTP服务器",fields:o,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b})},ha=t=>{const{data:s,showType:a,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b}=t,{url:u,heartInterval:c,reconnectInterval:p,messagePostFormat:f,reportSelfMessage:h}=s,o=[{label:"URL",value:u},{label:"重连间隔",value:`${p}ms`},{label:"心跳间隔",value:`${c}ms`},{label:"消息格式",value:f},{label:"上报自身消息",value:h,render:i=>e.jsx(q,{color:i?"success":"default",size:"sm",variant:"flat",children:i?"是":"否"})}];return e.jsx(Q,{data:s,showType:a,typeLabel:"Websocket客户端",fields:o,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b})},ba=t=>{const{data:s,showType:a,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b}=t,{host:u,port:c,heartInterval:p,messagePostFormat:f,reportSelfMessage:h,enableForcePushEvent:o}=s,i=[{label:"主机",value:u},{label:"端口",value:c},{label:"心跳间隔",value:`${p}ms`},{label:"消息格式",value:f},{label:"上报自身消息",value:h,render:g=>e.jsx(q,{color:g?"success":"default",size:"sm",variant:"flat",children:g?"是":"否"})},{label:"强制推送事件",value:o,render:g=>e.jsx(q,{color:g?"success":"default",size:"sm",variant:"flat",children:g?"是":"否"})}];return e.jsx(Q,{data:s,showType:a,typeLabel:"Websocket服务器",fields:i,onEdit:r,onEnable:n,onDelete:m,onEnableDebug:b})},J=({data:t,defaultValues:s,onClose:a,onSubmit:r,fields:n})=>{const{control:m,handleSubmit:b,formState:u,setValue:c,reset:p}=Kt({defaultValues:s}),h=b(async o=>{await r(o),a()},o=>{var g;const i=Object.values(o);i.length>0&&F.error((g=i[0])==null?void 0:g.message)});return N.useEffect(()=>{if(t){const o=Object.keys(t);for(const i of o){const g=t[i];c(i,g)}}else p()},[t,p,c]),e.jsxs(e.Fragment,{children:[e.jsx(Be,{children:e.jsx("div",{className:"grid grid-cols-2 gap-y-4 gap-x-2 w-full",children:n.map(o=>e.jsx("div",{className:o.colSpan===1?"col-span-1":"col-span-2",children:e.jsx(At,{control:m,name:o.name,rules:o.isRequired?{required:`请填写${o.label}`}:void 0,render:({field:i})=>{var g;switch(o.type){case"input":return e.jsx(Ft,{value:i.value,onValueChange:x=>i.onChange(x),ref:i.ref,isRequired:o.isRequired,isDisabled:o.isDisabled,label:o.label,placeholder:o.placeholder,classNames:{inputWrapper:"bg-default-100/50 dark:bg-white/5 backdrop-blur-md border border-transparent hover:bg-default-200/50 dark:hover:bg-white/10 transition-all shadow-sm data-[hover=true]:border-default-300",input:"bg-transparent text-default-700 placeholder:text-default-400"}});case"select":return e.jsx(kt,{...i,ref:i.ref,isRequired:o.isRequired,label:o.label,placeholder:o.placeholder,selectedKeys:[i.value],value:i.value.toString(),classNames:{trigger:"bg-default-100/50 dark:bg-white/5 backdrop-blur-md border border-transparent hover:bg-default-200/50 dark:hover:bg-white/10 transition-all shadow-sm data-[hover=true]:border-default-300",value:"text-default-700"},children:((g=o.options)==null?void 0:g.map(x=>e.jsx(jt,{value:x.value,children:x.value},x.key)))||e.jsx(e.Fragment,{})});case"switch":return e.jsx(Wt,{...i,value:i.value,description:o.description,label:o.label});default:return e.jsx(e.Fragment,{})}}})},o.name))})}),e.jsxs(Ze,{children:[e.jsx(O,{color:"primary",isDisabled:u.isSubmitting,variant:"light",onPress:a,children:"关闭"}),e.jsx(O,{color:"primary",isLoading:u.isSubmitting,onPress:()=>h(),children:"保存"})]})]})};function X(t){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%^&*()-_=+[]{}|;:,.<>?";let a="";for(let r=0;r<t;r++)a+=s.charAt(Math.floor(Math.random()*s.length));return a}const ma=({data:t,onClose:s,onSubmit:a})=>{const r={enable:!1,name:"",url:"http://localhost:8080",reportSelfMessage:!1,messagePostFormat:"array",token:X(16),debug:!1},n=[{name:"enable",label:"启用",type:"switch",description:"保存后启用此配置",colSpan:1},{name:"debug",label:"开启Debug",type:"switch",description:"是否开启调试模式",colSpan:1},{name:"name",label:"名称",type:"input",placeholder:"请输入名称",isRequired:!0,isDisabled:!!t},{name:"url",label:"URL",type:"input",placeholder:"请输入URL",isRequired:!0},{name:"reportSelfMessage",label:"上报自身消息",type:"switch",description:"是否上报自身消息",colSpan:1},{name:"messagePostFormat",label:"消息格式",type:"select",placeholder:"请选择消息格式",isRequired:!0,options:[{key:"array",value:"Array"},{key:"string",value:"String"}],colSpan:1},{name:"token",label:"Token",type:"input",placeholder:"请输入Token"}];return e.jsx(J,{data:t,defaultValues:r,onClose:s,onSubmit:a,fields:n})},fa=({data:t,onClose:s,onSubmit:a})=>{const r={enable:!1,name:"",host:"127.0.0.1",port:3e3,enableCors:!0,enableWebsocket:!1,messagePostFormat:"array",token:X(16),debug:!1},n=[{name:"enable",label:"启用",type:"switch",description:"保存后启用此配置",colSpan:1},{name:"debug",label:"开启Debug",type:"switch",description:"是否开启调试模式",colSpan:1},{name:"name",label:"名称",type:"input",placeholder:"请输入名称",isRequired:!0,isDisabled:!!t},{name:"host",label:"Host",type:"input",placeholder:"请输入主机地址",isRequired:!0},{name:"port",label:"Port",type:"input",placeholder:"请输入端口",isRequired:!0},{name:"enableCors",label:"启用CORS",type:"switch",description:"是否启用CORS跨域",colSpan:1},{name:"enableWebsocket",label:"启用Websocket",type:"switch",description:"是否启用Websocket",colSpan:1},{name:"messagePostFormat",label:"消息格式",type:"select",placeholder:"请选择消息格式",isRequired:!0,options:[{key:"array",value:"Array"},{key:"string",value:"String"}]},{name:"token",label:"Token",type:"input",placeholder:"请输入Token"}];return e.jsx(J,{data:t,defaultValues:r,onClose:s,onSubmit:a,fields:n})},ga=({data:t,onClose:s,onSubmit:a})=>{const r={enable:!1,name:"",host:"127.0.0.1",port:3e3,enableCors:!0,enableWebsocket:!1,messagePostFormat:"array",token:X(16),debug:!1,reportSelfMessage:!1},n=[{name:"enable",label:"启用",type:"switch",description:"保存后启用此配置",colSpan:1},{name:"debug",label:"开启Debug",type:"switch",description:"是否开启调试模式",colSpan:1},{name:"name",label:"名称",type:"input",placeholder:"请输入名称",isRequired:!0,isDisabled:!!t},{name:"host",label:"Host",type:"input",placeholder:"请输入主机地址",isRequired:!0},{name:"port",label:"Port",type:"input",placeholder:"请输入端口",isRequired:!0},{name:"enableCors",label:"启用CORS",type:"switch",description:"是否启用CORS跨域",colSpan:1},{name:"enableWebsocket",label:"启用Websocket",type:"switch",description:"是否启用Websocket",colSpan:1},{name:"messagePostFormat",label:"消息格式",type:"select",placeholder:"请选择消息格式",isRequired:!0,options:[{key:"array",value:"Array"},{key:"string",value:"String"}]},{name:"token",label:"Token",type:"input",placeholder:"请输入Token"},{name:"reportSelfMessage",label:"上报自身消息",type:"switch",description:"是否上报自身消息",colSpan:1}];return e.jsx(J,{data:t,defaultValues:r,onClose:s,onSubmit:a,fields:n})},va=({data:t,onClose:s,onSubmit:a})=>{const r={enable:!1,name:"",url:"ws://localhost:8082",reportSelfMessage:!1,messagePostFormat:"array",token:X(16),debug:!1,heartInterval:3e4,reconnectInterval:3e4},n=[{name:"enable",label:"启用",type:"switch",description:"保存后启用此配置",colSpan:1},{name:"debug",label:"开启Debug",type:"switch",description:"是否开启调试模式",colSpan:1},{name:"name",label:"名称",type:"input",placeholder:"请输入名称",isRequired:!0,isDisabled:!!t},{name:"url",label:"URL",type:"input",placeholder:"请输入URL",isRequired:!0},{name:"reportSelfMessage",label:"上报自身消息",type:"switch",description:"是否上报自身消息",colSpan:1},{name:"messagePostFormat",label:"消息格式",type:"select",placeholder:"请选择消息格式",isRequired:!0,options:[{key:"array",value:"Array"},{key:"string",value:"String"}],colSpan:1},{name:"token",label:"Token",type:"input",placeholder:"请输入Token"},{name:"heartInterval",label:"心跳间隔",type:"input",placeholder:"请输入心跳间隔",isRequired:!0,colSpan:1},{name:"reconnectInterval",label:"重连间隔",type:"input",placeholder:"请输入重连间隔",isRequired:!0,colSpan:1}];return e.jsx(J,{data:t,defaultValues:r,onClose:s,onSubmit:a,fields:n})},xa=({data:t,onClose:s,onSubmit:a})=>{const r={enable:!1,name:"",host:"127.0.0.1",port:3001,reportSelfMessage:!1,enableForcePushEvent:!0,messagePostFormat:"array",token:X(16),debug:!1,heartInterval:3e4},n=[{name:"enable",label:"启用",type:"switch",description:"保存后启用此配置",colSpan:1},{name:"debug",label:"开启Debug",type:"switch",description:"是否开启调试模式",colSpan:1},{name:"name",label:"名称",type:"input",placeholder:"请输入名称",isRequired:!0,isDisabled:!!t},{name:"host",label:"Host",type:"input",placeholder:"请输入主机地址",isRequired:!0},{name:"port",label:"Port",type:"input",placeholder:"请输入端口",isRequired:!0,colSpan:1},{name:"messagePostFormat",label:"消息格式",type:"select",placeholder:"请选择消息格式",isRequired:!0,options:[{key:"array",value:"Array"},{key:"string",value:"String"}],colSpan:1},{name:"reportSelfMessage",label:"上报自身消息",type:"switch",description:"是否上报自身消息",colSpan:1},{name:"enableForcePushEvent",label:"强制推送事件",type:"switch",description:"是否强制推送事件",colSpan:1},{name:"token",label:"Token",type:"input",placeholder:"请输入Token"},{name:"heartInterval",label:"心跳间隔",type:"input",placeholder:"请输入心跳间隔",isRequired:!0}];return e.jsx(J,{data:t,defaultValues:r,onClose:s,onSubmit:a,fields:n})},ya={httpServers:"HTTP Server",httpClients:"HTTP Client",httpSseServers:"HTTP SSE Server",websocketServers:"Websocket Server",websocketClients:"Websocket Client"},wa=t=>{const{isOpen:s,onOpenChange:a,field:r,data:n}=t,{createNetworkConfig:m,updateNetworkConfig:b}=be(),u=me(),c=!n,p=async h=>{const o=async i=>{try{c?await m(r,i):await b(r,i),F.success("保存配置成功")}catch(g){const x=g.message;throw F.error(`保存配置失败: ${x}`),g}};if(["httpServers","httpSseServers","websocketServers"].includes(r)){const i=h;if(!i.token&&i.host!=="127.0.0.1"){await new Promise((g,x)=>{u.confirm({title:"安全警告",content:e.jsxs("div",{children:[e.jsx("p",{children:"检测到未配置Token，这可能导致安全风险。确认要继续吗？"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"(未配置Token时，Host将被强制限制为 127.0.0.1)"})]}),onConfirm:async()=>{i.host="127.0.0.1";try{await o(i),g()}catch(y){x(y)}},onCancel:()=>{x(new Error("Cancelled"))}})});return}}await o(h)},f=h=>{switch(r){case"httpServers":return e.jsx(fa,{data:n,onClose:h,onSubmit:p});case"httpClients":return e.jsx(ma,{data:n,onClose:h,onSubmit:p});case"websocketServers":return e.jsx(xa,{data:n,onClose:h,onSubmit:p});case"websocketClients":return e.jsx(va,{data:n,onClose:h,onSubmit:p});case"httpSseServers":return e.jsx(ga,{data:n,onClose:h,onSubmit:p});default:return null}};return e.jsx(Ge,{backdrop:"blur",isDismissable:!1,isOpen:s,size:"lg",scrollBehavior:"outside",onOpenChange:a,children:e.jsx(Qe,{children:h=>e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"flex flex-col gap-1",children:ya[r]}),f(h)]})})})},Sa=({isEmpty:t})=>e.jsx("div",{className:Y("text-default-400",{hidden:!t}),children:"暂时还没有配置项哈"});function as(){const{config:t,refreshConfig:s,deleteNetworkConfig:a,enableNetworkConfig:r,enableDebugNetworkConfig:n}=be(),[m,b]=N.useState("httpServers"),[u,c]=N.useState(""),{network:{httpServers:p,httpClients:f,httpSseServers:h,websocketServers:o,websocketClients:i}}=t,[g,x]=N.useState(!1),{isOpen:y,onOpen:w,onOpenChange:D}=Xe(),v=me(),T=N.useMemo(()=>t.network[m].find(l=>l.name===u),[m,u,t]),j=async()=>{x(!0);try{await s(),x(!1)}catch(d){const l=d.message;F.error(`获取配置失败: ${l}`)}finally{x(!1)}},M=d=>{b(d),c(""),w()},$=async(d,l)=>new Promise((k,S)=>{v.confirm({title:"删除配置",content:`确定要删除配置「${l}」吗?`,onConfirm:async()=>{try{await a(d,l),F.success("删除配置成功"),k()}catch(I){const E=I.message;F.error(`删除配置失败: ${E}`),S(I)}},onCancel:()=>{k()}})}),C=async(d,l)=>{try{await r(d,l),F.success("更新配置成功")}catch(k){const S=k.message;throw F.error(`更新配置失败: ${S}`),k}},H=async(d,l)=>{try{await n(d,l),F.success("更新配置成功")}catch(k){const S=k.message;throw F.error(`更新配置失败: ${S}`),k}},_=(d,l)=>{b(d),c(l),w()},P=(d,l,k=!1)=>{switch(d){case"httpServers":return e.jsx(ua,{showType:k,data:l,onDelete:async()=>{await $("httpServers",l.name)},onEdit:()=>{_("httpServers",l.name)},onEnable:async()=>{await C("httpServers",l.name)},onEnableDebug:async()=>{await H("httpServers",l.name)}},l.name);case"httpClients":return e.jsx(da,{showType:k,data:l,onDelete:async()=>{await $("httpClients",l.name)},onEdit:()=>{_("httpClients",l.name)},onEnable:async()=>{await C("httpClients",l.name)},onEnableDebug:async()=>{await H("httpClients",l.name)}},l.name);case"httpSseServers":return e.jsx(pa,{showType:k,data:l,onDelete:async()=>{await $("httpSseServers",l.name)},onEdit:()=>{_("httpSseServers",l.name)},onEnable:async()=>{await C("httpSseServers",l.name)},onEnableDebug:async()=>{await H("httpSseServers",l.name)}},l.name);case"websocketServers":return e.jsx(ba,{showType:k,data:l,onDelete:async()=>{await $("websocketServers",l.name)},onEdit:()=>{_("websocketServers",l.name)},onEnable:async()=>{await C("websocketServers",l.name)},onEnableDebug:async()=>{await H("websocketServers",l.name)}},l.name);case"websocketClients":return e.jsx(ha,{showType:k,data:l,onDelete:async()=>{await $("websocketClients",l.name)},onEdit:()=>{_("websocketClients",l.name)},onEnable:async()=>{await C("websocketClients",l.name)},onEnableDebug:async()=>{await H("websocketClients",l.name)}},l.name)}},A=[{key:"all",title:"全部",items:[...p,...f,...o,...i,...h].sort((d,l)=>d.name.localeCompare(l.name)).map(d=>p.find(l=>l.name===d.name)?P("httpServers",d,!0):h.find(l=>l.name===d.name)?P("httpSseServers",d,!0):f.find(l=>l.name===d.name)?P("httpClients",d,!0):o.find(l=>l.name===d.name)?P("websocketServers",d,!0):i.find(l=>l.name===d.name)?P("websocketClients",d,!0):null)},{key:"httpServers",title:"HTTP服务器",items:p.map(d=>P("httpServers",d))},{key:"httpClients",title:"HTTP客户端",items:f.map(d=>P("httpClients",d))},{key:"httpSseServers",title:"HTTP SSE服务器",items:h.map(d=>P("httpSseServers",d))},{key:"websocketServers",title:"Websocket服务器",items:o.map(d=>P("websocketServers",d))},{key:"websocketClients",title:"Websocket客户端",items:i.map(d=>P("websocketClients",d))}];return N.useEffect(()=>{j()},[]),e.jsxs(e.Fragment,{children:[e.jsx("title",{children:"网络配置 - NapCat WebUI"}),e.jsxs("div",{className:"p-2 md:p-4 relative",children:[e.jsx(wa,{data:T,field:m,isOpen:y,onOpenChange:D}),e.jsx(Ye,{loading:g}),e.jsxs("div",{className:"flex mb-6 items-center gap-4",children:[e.jsx(ia,{onOpen:M}),e.jsx(O,{isIconOnly:!0,className:"bg-default-100/50 hover:bg-default-200/50 text-default-700 backdrop-blur-md",radius:"full",onPress:j,children:e.jsx(mt,{size:24})})]}),e.jsx(et,{"aria-label":"Network Configs",className:"max-w-full",items:A,classNames:{tabList:"bg-white/40 dark:bg-black/20 backdrop-blur-md",cursor:"bg-white/80 dark:bg-white/10 backdrop-blur-md shadow-sm"},children:d=>e.jsxs(tt,{title:d.title,children:[e.jsx(Sa,{isEmpty:!d.items.length}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 justify-start items-stretch gap-x-2 gap-y-4",children:d.items})]},d.key)})]})]})}export{as as default};
